<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>StudentHubik</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="topbar">
    <div class="top-left">
        <img src="{{ url_for('static', filename='logo.svg') }}" class="top-logo" alt="StudentHubik">
    </div>

    {% if current_user.is_authenticated %}
    <div class="top-right">
        <div class="user-avatar">{{ current_user.name[0]|upper }}</div>
        <span class="username">{{ current_user.name }}</span>
        <a href="{{ url_for('logout') }}" class="logout-btn">Выйти</a>
    </div>
    {% endif %}
</div>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="flash-wrapper">
      {% for message in messages %}
        <div class="flash-message">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<div class="app-container">

    {% if current_user.is_authenticated %}
    <aside class="sidebar">
        <a href="{{ url_for('dashboard') }}" class="nav-link">Панель</a>
        <a href="{{ url_for('profile') }}" class="nav-link">Профиль</a>
        <a href="{{ url_for('support') }}" class="nav-link">Помощь и поддержка</a>
        {% if current_user.role == 'student' %}
            <a href="{{ url_for('student_dashboard') }}" class="nav-link">Мои оценки</a>
            <a href="{{ url_for('export_student_grades') }}" class="nav-link">Экспорт оценок</a>
        {% elif current_user.role == 'teacher' %}
            <a href="{{ url_for('teacher_dashboard') }}" class="nav-link">Кабинет преподавателя</a>
            <a href="{{ url_for('export_teacher_grades') }}" class="nav-link">Экспорт оценок</a>
        {% elif current_user.role == 'admin' %}
            <a href="{{ url_for('admin_dashboard') }}" class="nav-link">Админ-панель</a>
        {% endif %}
    </aside>
    {% endif %}

    <main class="main-content{% if not current_user.is_authenticated %} no-sidebar{% endif %}">
        {% block content %}{% endblock %}
    </main>

</div>

</body>
</html>
