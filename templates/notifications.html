{% extends "base.html" %}
{% block content %}
<h1 class="page-title">Уведомления</h1>
<section class="card">
    {% if notifications %}
    <div class="table-wrap">
        <table class="grade-table">
            <thead><tr><th>Время</th><th>Заголовок</th><th>Сообщение</th><th>Статус</th></tr></thead>
            <tbody>
                {% for item in notifications %}
                <tr>
                    <td>{{ item.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                    <td>{{ item.title }}</td>
                    <td>{{ item.message }}</td>
                    <td>
                        {% if item.is_read %}
                            <span class="muted-text">Прочитано</span>
                        {% else %}
                            <form method="POST" action="{{ url_for('mark_notification_read', notification_id=item.id) }}">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                                <button class="btn" type="submit">Отметить прочитанным</button>
                            </form>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p class="muted-text">Новых уведомлений пока нет.</p>
    {% endif %}
</section>
{% endblock %}
